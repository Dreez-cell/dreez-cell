<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testagram Reels - World News</title>
  <!-- SEO and Google Discover Enhancements -->
  <meta name="description" content="Latest world news and videos from trusted global sources, curated daily by Testagram Reels.">
  <meta name="keywords" content="world news, breaking news, news videos, Testagram Reels, global updates">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Testagram Reels - World News">
  <meta property="og:description" content="Watch the latest news videos and read stories from top sources, curated by Testagram Reels.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://dreez-cell.github.io/dreez-cell/assets/images/og-image.jpg">
  <meta property="og:url" content="https://dreez-cell.github.io/dreez-cell">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Testagram Reels - World News">
  <meta name="twitter:description" content="Watch the latest news videos and read stories from top sources, curated by Testagram Reels.">
  <meta name="twitter:image" content="https://dreez-cell.github.io/dreez-cell/assets/images/og-image.jpg">
  <link rel="canonical" href="https://dreez-cell.github.io/dreez-cell">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml">
  <!-- Structured Data for Google Discover -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Testagram Reels",
    "url": "https://dreez-cell.github.io/dreez-cell",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://dreez-cell.github.io/dreez-cell/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* Original CSS unchanged */
    body {font-family: Arial, sans-serif; margin:0; padding:0; background:#121212; color:#f5f5f5;}
    .header {background:#1f1f1f; color:#ff9800; text-align:center; padding:15px 0; font-size:28px; font-weight:bold; border-bottom:2px solid #333; position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:center;gap:15px;}
    .logo {display: flex;align-items: center;justify-content: center;gap: 10px;}
    .logo-icon {font-size: 24px;}
    .theme-toggle-btn {background: #333;color: #ff9800;border: 1px solid #ff9800;border-radius: 50px;padding: 8px 18px;font-size: 15px;cursor: pointer;margin-left: 16px;transition: background 0.3s, color 0.3s, border 0.3s;outline: none;}
    .theme-toggle-btn:hover {background: #ff9800;color: #1f1f1f;border: 1px solid #1f1f1f;}
    .search-container {display: flex;justify-content: center;padding: 15px;background-color: #1a1a1a;position: sticky;top: 62px;z-index: 99;}
    .search-box {display: flex;width: 100%;max-width: 600px;position: relative;}
    .search-input {flex: 1;padding: 10px 15px;border: 1px solid #333;border-radius: 25px;background-color: #2a2a2a;color: #fff;font-size: 16px;outline: none;}
    .search-input:focus {border-color: #ff9800;box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);}
    .search-button {position: absolute;right: 5px;top: 5px;background-color: #ff9800;color: #000;border: none;border-radius: 50%;width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;cursor: pointer;transition: background-color 0.3s;}
    .search-button:hover {background-color: #ffb74d;}
    .categories-container {display: flex;overflow-x: auto;gap: 10px;padding: 15px;background-color: #1e1e1e;border-bottom: 1px solid #333;scroll-behavior: smooth;-webkit-overflow-scrolling: touch;position: sticky;top: 127px;z-index: 98;}
    .category {flex: 0 0 auto;padding: 8px 15px;background-color: #2a2a2a;color: #ccc;border-radius: 20px;cursor: pointer;transition: all 0.3s ease;font-size: 14px;white-space: nowrap;}
    .category:hover {background-color: #333;color: #fff;}
    .category.active {background-color: #ff9800;color: #000;}
    .stories-container {display: flex;overflow-x: auto;gap: 15px;padding: 15px;background-color: #1e1e1e;border-bottom: 1px solid #333;scroll-behavior: smooth;-webkit-overflow-scrolling: touch;}
    .story {flex: 0 0 auto;width: 80px;height: 120px;border-radius: 10px;overflow: hidden;cursor: pointer;border: 2px solid #ff9800;position: relative;transition: transform 0.3s ease;}
    .story:hover {transform: scale(1.05);}
    .story img {width: 100%;height: 100%;object-fit: cover;}
    .story-title {position: absolute;bottom: 0;left: 0;right: 0;background: rgba(0, 0, 0, 0.7);color: white;padding: 4px;font-size: 10px;text-align: center;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;}
    .rss-feed-container {margin: 20px;display: grid;grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));gap: 20px;}
    .rss-item {background-color: #1f1f1f;border-radius: 10px;overflow: hidden;border: 1px solid #333;transition: transform 0.3s ease, box-shadow 0.3s ease;}
    .rss-item:hover {transform: translateY(-5px);box-shadow: 0 10px 20px rgba(0,0,0,0.3);}
    .rss-item img {width: 100%;height: 180px;object-fit: cover;background-color: #2a2a2a;}
    .rss-content {padding: 15px;}
    .rss-content h3 {color: #ff9800;font-size: 18px;margin: 0 0 10px 0;line-height: 1.3;}
    .rss-content p {color: #ccc;font-size: 14px;line-height: 1.5;margin-bottom: 15px;}
    .rss-content .source {color: #888;font-size: 12px;margin-bottom: 10px;display: flex;align-items: center;gap: 5px;}
    .source-tag {background-color: #333;color: #ccc;padding: 2px 6px;border-radius: 4px;font-size: 10px;}
    .rss-content .date {color: #888;font-size: 12px;margin-bottom: 15px;}
    .rss-content a.read-more {color: #ff9800;text-decoration: none;font-size: 14px;font-weight: bold;display: inline-block;padding: 5px 10px;border: 1px solid #ff9800;border-radius: 5px;transition: background-color 0.3s ease;}
    .rss-content a.read-more:hover {background-color: rgba(255, 152, 0, 0.1);}
    .social-share {display: flex;gap: 10px;margin-top: 15px;}
    .social-button {width: 32px;height: 32px;border-radius: 50%;display: flex;align-items: center;justify-content: center;color: #fff;cursor: pointer;transition: transform 0.3s ease;}
    .social-button:hover {transform: scale(1.1);}
    .facebook {background-color: #3b5998;}
    .twitter {background-color: #1da1f2;}
    .whatsapp {background-color: #25d366;}
    .telegram {background-color: #0088cc;}
    .loading {text-align: center;padding: 20px;font-size: 18px;color: #ff9800;}
    .error {text-align: center;padding: 20px;font-size: 18px;color: #ff5252;}
    .no-results {text-align: center;padding: 40px 20px;font-size: 18px;color: #888;grid-column: 1 / -1;}
    .load-more {grid-column: 1 / -1;text-align: center;margin: 20px 0;}
    .load-more button {background-color: #2a2a2a;color: #ff9800;border: 1px solid #ff9800;padding: 10px 20px;border-radius: 5px;cursor: pointer;font-size: 16px;transition: all 0.3s ease;}
    .load-more button:hover {background-color: rgba(255, 152, 0, 0.1);}
    @media (max-width: 768px) {.rss-feed-container {grid-template-columns: 1fr;}.header {font-size: 24px;padding: 10px 0;}}
    ::-webkit-scrollbar {height: 8px;width: 8px;}
    ::-webkit-scrollbar-track {background: #1e1e1e;}
    ::-webkit-scrollbar-thumb {background: #ff9800;border-radius: 4px;}
    ::-webkit-scrollbar-thumb:hover {background: #ffb74d;}
    @keyframes pulse {0% { opacity: 0.6; }50% { opacity: 1; }100% { opacity: 0.6; }}
    .loading {animation: pulse 1.5s infinite;}
    .lazy-image {opacity: 0;transition: opacity 0.3s ease;}
    .lazy-image.loaded {opacity: 1;}
    .placeholder {background: linear-gradient(90deg, #2a2a2a 25%, #333 50%, #2a2a2a 75%);background-size: 200% 100%;animation: loading 1.5s infinite;}
    @keyframes loading {0% { background-position: 200% 0; }100% { background-position: -200% 0; }}
    body.light-theme {background-color: #f5f5f5;color: #222;}
    body.light-theme .header {background-color: #fff3e0;color: #ff9800;border-bottom: 2px solid #ffe0b2;}
    body.light-theme .theme-toggle-btn {background: #fff;color: #ff9800;border: 1px solid #ff9800;}
    body.light-theme .theme-toggle-btn:hover {background: #ff9800;color: #fff;border: 1px solid #ff9800;}
    body.light-theme .search-container {background-color: #ffe0b2;}
    body.light-theme .search-input {background-color: #fff;color: #222;border: 1px solid #ff9800;}
    body.light-theme .search-input:focus {border-color: #ff9800;box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);}
    body.light-theme .search-button {background-color: #ff9800;color: #fff;}
    body.light-theme .search-button:hover {background-color: #ffb74d;color: #fff;}
    body.light-theme .categories-container {background-color: #fff3e0;border-bottom: 1px solid #ffe0b2;}
    body.light-theme .category {background-color: #fff;color: #ff9800;}
    body.light-theme .category:hover {background-color: #ffe0b2;color: #ff9800;}
    body.light-theme .category.active {background-color: #ff9800;color: #fff;}
    body.light-theme .stories-container {background-color: #fff3e0;border-bottom: 1px solid #ffe0b2;}
    body.light-theme .story {border: 2px solid #ff9800;}
    body.light-theme .story-title {background: rgba(255, 152, 0, 0.8);color: #fff;}
    body.light-theme .rss-feed-container {background: #fff;}
    body.light-theme .rss-item {background-color: #fffbe8;border: 1px solid #ffe0b2;}
    body.light-theme .rss-content h3 {color: #ff9800;}
    body.light-theme .rss-content p {color: #444;}
    body.light-theme .source-tag {background-color: #ffe0b2;color: #ff9800;}
    body.light-theme .rss-content .date {color: #888;}
    body.light-theme .rss-content a.read-more {color: #fff;background: #ff9800;border: 1px solid #ff9800;}
    body.light-theme .rss-content a.read-more:hover {background-color: #ffb74d;color: #fff;}
    body.light-theme .social-button {color: #fff;}
    body.light-theme .facebook {background-color: #3b5998;}
    body.light-theme .twitter {background-color: #1da1f2;}
    body.light-theme .whatsapp {background-color: #25d366;}
    body.light-theme .telegram {background-color: #0088cc;}
    body.light-theme .loading, body.light-theme .error, body.light-theme .no-results {color: #ff9800;}
    body.light-theme .load-more button {background-color: #fff;color: #ff9800;border: 1px solid #ff9800;}
    body.light-theme .load-more button:hover {background-color: #ffe0b2;color: #ff9800;}
    body.light-theme .placeholder {background: linear-gradient(90deg, #ffe0b2 25%, #fffbe8 50%, #ffe0b2 75%);}
    body.light-theme ::-webkit-scrollbar-track {background: #fff3e0;}
    body.light-theme ::-webkit-scrollbar-thumb {background: #ff9800;}
    body.light-theme ::-webkit-scrollbar-thumb:hover {background: #ffb74d;}
    .comments-section {border-top: 1px solid #333; margin-top: 15px; padding-top: 10px; background: transparent;}
    /* New CSS for Vertical Video Modal */
    .video-modal {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; overflow-y: auto; scroll-snap-type: y mandatory;}
    .video-modal.active {display: block;}
    .video-container {width: 100%; height: 100vh; scroll-snap-align: center; display: flex; align-items: center; justify-content: center; position: relative;}
    .video-container iframe {width: 100%; max-width: 600px; height: 100%; max-height: 80vh; object-fit: contain;}
    .video-title {position: absolute; bottom: 20px; left: 10px; right: 10px; background: rgba(0, 0, 0, 0.7); color: white; padding: 8px; font-size: 14px; text-align: center;}
    .close-modal {position: fixed; top: 10px; right: 10px; background: #ff9800; color: #000; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 1001;}
    .close-modal:hover {background: #ffb74d;}
    body.light-theme .video-modal {background: #fff;}
    body.light-theme .video-title {background: rgba(255, 152, 0, 0.8); color: #fff;}
    body.light-theme .close-modal {background: #ff9800; color: #fff;}
    body.light-theme .close-modal:hover {background: #ffb74d;}
  </style>
</head>
<body>
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v23.0"></script>
  <div class="header">
    <div class="logo">
      <span class="logo-icon">📰</span>
      <span>Testagram Reels</span>
    </div>
    <button class="theme-toggle-btn" id="themeToggleBtn" title="Toggle light/dark mode">
      <i class="fa fa-moon" id="themeIcon"></i>
      <span id="themeLabel" style="margin-left:5px;">Dark</span>
    </button>
  </div>
  <div class="search-container">
    <div class="search-box">
      <input type="text" id="search-input" class="search-input" placeholder="Search news...">
      <button id="search-button" class="search-button">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </div>
  <div class="categories-container" id="categories-container">
    <div class="category active" data-category="all">All News</div>
  </div>
  <div class="stories-container" id="stories-container"></div>
  <!-- New Video Modal for Vertical Scrolling -->
  <div class="video-modal" id="videoModal">
    <button class="close-modal" id="closeModal"><i class="fas fa-times"></i></button>
    <div id="videoFeed"></div>
  </div>
  <div id="loading" class="loading">Loading world news...</div>
  <div class="rss-feed-container" id="rss-feed"></div>
  <script>
    function setTheme(theme) {
      if (theme === "light") {
        document.body.classList.add('light-theme');
        document.getElementById('themeLabel').textContent = "Light";
        document.getElementById('themeIcon').className = "fa fa-sun";
      } else {
        document.body.classList.remove('light-theme');
        document.getElementById('themeLabel').textContent = "Dark";
        document.getElementById('themeIcon').className = "fa fa-moon";
      }
      localStorage.setItem('theme', theme);
    }
    (() => {
      const savedTheme = localStorage.getItem('theme');
      setTheme(savedTheme === "light" ? "light" : "dark");
    })();
    document.getElementById('themeToggleBtn').addEventListener('click', function() {
      const isLight = document.body.classList.contains('light-theme');
      setTheme(isLight ? "dark" : "light");
    });

    // Updated RSS Feeds with Additional YouTube Channels
    const rssSources = [
      // World News
      {"url":"https://feeds.bbci.co.uk/news/world/rss.xml","name":"BBC World","category":"World"},
      {"url":"https://rss.cnn.com/rss/edition_world.rss","name":"CNN World","category":"World"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/World.xml","name":"NYT World","category":"World"},
      {"url":"https://www.aljazeera.com/xml/rss/all.xml","name":"Al Jazeera","category":"World"},
      {"url":"https://feeds.reuters.com/reuters/worldNews","name":"Reuters World","category":"World"},
      {"url":"https://www.theguardian.com/world/rss","name":"Guardian World","category":"World"},
      {"url":"https://www.france24.com/en/rss","name":"France24","category":"World"},
      {"url":"https://www.dw.com/en/top-stories/s-9097?maca=en-rss-en-all-1573-rdf","name":"DW World","category":"World"},
      {"url":"https://www.japantimes.co.jp/feed/","name":"Japan Times","category":"Asia"},
      {"url":"https://feeds.npr.org/1004/rss.xml","name":"NPR World","category":"World"},
      {"url":"https://www.cbc.ca/cmlink/rss-world","name":"CBC World","category":"Americas"},
      {"url":"https://www.euronews.com/rss?level=theme&name=news","name":"Euronews","category":"Europe"},
      {"url":"https://www.latimes.com/world/rss2.0.xml","name":"LA Times World","category":"Americas"},
      {"url":"https://www.abc.net.au/news/feed/51120/rss.xml","name":"ABC Australia World","category":"Asia-Pacific"},
      {"url":"https://www.csmonitor.com/rss/world","name":"Christian Science Monitor World","category":"World"},
      {"url":"https://www.smh.com.au/rss/feed.xml","name":"Sydney Morning Herald","category":"Asia-Pacific"},
      {"url":"https://www.lemonde.fr/rss/une.xml","name":"Le Monde (FR)","category":"Europe"},
      {"url":"https://www.hindustantimes.com/rss/topnews/rssfeed.xml","name":"Hindustan Times","category":"Asia"},
      {"url":"https://www.straitstimes.com/news/world/rss.xml","name":"Straits Times","category":"Asia"},
      {"url":"https://www.thetimes.co.uk/environment/rss","name":"The Times Environment","category":"Europe"},
      {"url":"https://www.marketwatch.com/rss/topstories","name":"MarketWatch","category":"Business"},
      {"url":"https://feeds.bbci.co.uk/news/business/rss.xml","name":"BBC Business","category":"Business"},
      {"url":"https://www.cnbc.com/id/10001147/device/rss/rss.html","name":"CNBC Top News","category":"Business"},
      {"url":"https://feeds.reuters.com/reuters/businessNews","name":"Reuters Business","category":"Business"},
      {"url":"https://www.economist.com/business/rss.xml","name":"The Economist","category":"Business"},
      {"url":"https://www.wsj.com/xml/rss/3_7014.xml","name":"WSJ Business","category":"Business"},
      {"url":"https://www.forbes.com/business/feed/","name":"Forbes Business","category":"Business"},
      {"url":"https://www.ft.com/?format=rss","name":"Financial Times","category":"Business"},
      {"url":"https://www.bloomberg.com/feed/podcast/etf-report.xml","name":"Bloomberg ETF","category":"Business"},
      {"url":"https://feeds.bbci.co.uk/news/technology/rss.xml","name":"BBC Technology","category":"Tech"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/Technology.xml","name":"NYT Technology","category":"Tech"},
      {"url":"https://feeds.arstechnica.com/arstechnica/index","name":"Ars Technica","category":"Tech"},
      {"url":"https://www.cnet.com/rss/news/","name":"CNET News","category":"Tech"},
      {"url":"https://www.engadget.com/rss.xml","name":"Engadget","category":"Tech"},
      {"url":"https://feeds.feedburner.com/TechCrunch/","name":"TechCrunch","category":"Tech"},
      {"url":"https://www.theverge.com/rss/index.xml","name":"The Verge","category":"Tech"},
      {"url":"https://www.zdnet.com/news/rss.xml","name":"ZDNet","category":"Tech"},
      {"url":"https://www.gsmarena.com/rss-news-reviews.php3","name":"GSMArena","category":"Tech"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/Science.xml","name":"NYT Science","category":"Science"},
      {"url":"https://feeds.bbci.co.uk/news/science_and_environment/rss.xml","name":"BBC Science/Env","category":"Science"},
      {"url":"https://www.npr.org/rss/rss.php?id=1007","name":"NPR Science","category":"Science"},
      {"url":"https://www.sciencedaily.com/rss/all.xml","name":"ScienceDaily","category":"Science"},
      {"url":"https://www.nature.com/subjects/science/rss.xml","name":"Nature Science","category":"Science"},
      {"url":"https://www.space.com/feeds/all","name":"Space.com","category":"Science"},
      {"url":"https://www.nasa.gov/rss/dyn/breaking_news.rss","name":"NASA Breaking News","category":"Science"},
      {"url":"https://www.newscientist.com/section/news/feed/","name":"New Scientist","category":"Science"},
      {"url":"https://www.livescience.com/feeds/all","name":"Live Science","category":"Science"},
      {"url":"https://feeds.nationalgeographic.com/ng/News/News_Main","name":"National Geographic","category":"Environment"},
      {"url":"https://www.theguardian.com/environment/rss","name":"Guardian Environment","category":"Environment"},
      {"url":"https://www.bbc.co.uk/news/science_and_environment/rss.xml","name":"BBC Environment","category":"Environment"},
      {"url":"https://www.climatechangenews.com/feed/","name":"Climate Change News","category":"Environment"},
      {"url":"https://www.medicalnewstoday.com/rss","name":"Medical News Today","category":"Health"},
      {"url":"https://www.webmd.com/rss/news_breaking.xml","name":"WebMD","category":"Health"},
      {"url":"https://www.cdc.gov/rss/cdcsyndications.xml","name":"CDC Health","category":"Health"},
      {"url":"https://www.who.int/feeds/entity/csr/don/en/rss.xml","name":"WHO Disease Outbreaks","category":"Health"},
      {"url":"https://www.health.com/feed","name":"Health.com","category":"Health"},
      {"url":"https://www.mayoclinic.org/rss/topstories.xml","name":"Mayo Clinic","category":"Health"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/Sports.xml","name":"NYT Sports","category":"Sports"},
      {"url":"https://feeds.bbci.co.uk/sport/rss.xml","name":"BBC Sports","category":"Sports"},
      {"url":"https://www.espn.com/espn/rss/news","name":"ESPN News","category":"Sports"},
      {"url":"https://www.si.com/rss/si_topstories.rss","name":"Sports Illustrated","category":"Sports"},
      {"url":"https://www.cbssports.com/rss/headlines/","name":"CBS Sports","category":"Sports"},
      {"url":"https://www.sportingnews.com/us/rss","name":"Sporting News","category":"Sports"},
      {"url":"https://www.goal.com/feeds/en/news","name":"Goal.com Football","category":"Sports"},
      {"url":"https://www.billboard.com/feed/","name":"Billboard","category":"Entertainment"},
      {"url":"https://feeds.bbci.co.uk/news/entertainment_and_arts/rss.xml","name":"BBC Ent.","category":"Entertainment"},
      {"url":"https://www.hollywoodreporter.com/t/rss","name":"Hollywood Reporter","category":"Entertainment"},
      {"url":"https://www.eonline.com/syndication/feeds/rssfeeds/topstories.xml","name":"E! Online","category":"Entertainment"},
      {"url":"https://www.rollingstone.com/music/music-news/feed/","name":"Rolling Stone","category":"Entertainment"},
      {"url":"https://www.nme.com/news/music/feed","name":"NME Music","category":"Entertainment"},
      {"url":"https://variety.com/feed/","name":"Variety","category":"Entertainment"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/Politics.xml","name":"NYT Politics","category":"Politics"},
      {"url":"https://feeds.bbci.co.uk/news/politics/rss.xml","name":"BBC Politics","category":"Politics"},
      {"url":"https://www.politico.com/rss/politics08.xml","name":"Politico","category":"Politics"},
      {"url":"https://www.cnn.com/rss/cnn_allpolitics.rss","name":"CNN Politics","category":"Politics"},
      {"url":"https://allafrica.com/tools/headlines/rdf/latest/headlines.rdf","name":"AllAfrica","category":"Africa"},
      {"url":"https://www.scmp.com/rss/91/feed","name":"South China Morning Post","category":"Asia"},
      {"url":"https://www.bangkokpost.com/rss/data/worldnews.xml","name":"Bangkok Post","category":"Asia"},
      {"url":"https://www.lanacion.com.ar/rssFeed/0","name":"La Nacion","category":"Americas"},
      {"url":"https://www.timeslive.co.za/rss/?section=news","name":"TimesLIVE South Africa","category":"Africa"},
      {"url":"https://www.independent.co.uk/news/uk/rss","name":"Independent UK News","category":"Europe"},
      {"url":"https://www.thelocal.de/feeds/news.rss","name":"The Local Germany","category":"Europe"},
      {"url":"https://www.elmundo.es/rss/portada.xml","name":"El Mundo (ES)","category":"Europe"},
      {"url":"https://www.corriere.it/rss/homepage.xml","name":"Corriere della Sera (IT)","category":"Europe"},
      {"url":"https://www.ansa.it/sito/ansait_rss.xml","name":"ANSA (IT)","category":"Europe"},
      {"url":"https://www.ilsole24ore.com/rss/notizie/primopiano.xml","name":"Il Sole 24 Ore (IT)","category":"Europe"},
      {"url":"https://www.lefigaro.fr/rss/figaro_actualites.xml","name":"Le Figaro (FR)","category":"Europe"},
      {"url":"https://www.rfi.fr/fr/flux/rss","name":"RFI (FR)","category":"Europe"},
      {"url":"https://www.elpais.com/rss/feed.html?feedId=1022","name":"El Pais (ES)","category":"Europe"},
      {"url":"https://www.latribune.fr/rss/rsslaune.xml","name":"La Tribune (FR)","category":"Europe"},
      {"url":"https://feeds.skynews.com/feeds/rss/world.xml","name":"Sky News World","category":"World"},
      {"url":"https://www.abc.es/rss/feeds/abc_Internacional.xml","name":"ABC Internacional (ES)","category":"Europe"},
      {"url":"https://www.rt.com/rss/news/","name":"RT News","category":"World"},
      {"url":"https://www.rte.ie/news/rss/news-headlines.xml","name":"RTE News (IE)","category":"Europe"},
      {"url":"https://www.leparisien.fr/archives/rss.xml","name":"Le Parisien (FR)","category":"Europe"},
      {"url":"https://www.dailynation.com/rss.xml","name":"Daily Nation (KE)","category":"Africa"},
      {"url":"https://www.standardmedia.co.ke/rss/headlines.php","name":"Standard Media (KE)","category":"Africa"},
      {"url":"https://www.vanguardngr.com/feed/","name":"Vanguard (NG)","category":"Africa"},
      {"url":"https://www.punchng.com/feed/","name":"Punch Nigeria","category":"Africa"},
      {"url":"https://www.modernghana.com/rss/news.xml","name":"Modern Ghana","category":"Africa"},
      {"url":"https://www.dawn.com/feeds/home","name":"Dawn (PK)","category":"Asia"},
      {"url":"https://www.geo.tv/rss/1/1","name":"Geo News (PK)","category":"Asia"},
      {"url":"https://www.thehindu.com/news/national/feeder/default.rss","name":"The Hindu (IN)","category":"Asia"},
      {"url":"https://timesofindia.indiatimes.com/rssfeeds/-2128936835.cms","name":"Times of India","category":"Asia"},
      {"url":"https://www.straitstimes.com/news/asia/rss.xml","name":"Straits Times Asia","category":"Asia"},
      {"url":"https://testagramreelsapk.blogspot.com/feeds/posts/default?alt=rss","name":"Testagram Reels News","category":"World"},
      {"url":"https://www.malaymail.com/feed/rss","name":"Malay Mail","category":"Asia"},
      {"url":"https://www.bangkokpost.com/rss/data/news.xml","name":"Bangkok Post News","category":"Asia"},
      {"url":"https://www.philstar.com/rss/headlines.xml","name":"PhilStar","category":"Asia"},
      {"url":"https://www.manilatimes.net/feed/","name":"Manila Times","category":"Asia"},
      {"url":"https://www.rappler.com/feed/","name":"Rappler Philippines","category":"Asia"},
      {"url":"https://www.chinadaily.com.cn/rss/china_rss.xml","name":"China Daily","category":"Asia"},
      {"url":"https://www.chinadaily.com.cn/rss/world_rss.xml","name":"China Daily World","category":"Asia"},
      {"url":"https://www.koreatimes.co.kr/www/rss/nation.xml","name":"Korea Times","category":"Asia"},
      {"url":"https://www.koreaherald.com/rss/section_kh.xml","name":"Korea Herald","category":"Asia"},
      {"url":"https://www.nzherald.co.nz/rss/national/","name":"NZ Herald National","category":"Asia-Pacific"},
      {"url":"https://www.nzherald.co.nz/rss/world/","name":"NZ Herald World","category":"Asia-Pacific"},
      {"url":"https://www.smh.com.au/rss/world.xml","name":"SMH World","category":"Asia-Pacific"},
      {"url":"https://www.heraldsun.com.au/news/world/rss","name":"Herald Sun World","category":"Asia-Pacific"},
      {"url":"https://www.cbc.ca/cmlink/rss-canada","name":"CBC News Canada","category":"Americas"},
      {"url":"https://www.ctvnews.ca/rss/ctvnews-ca-world-public-rss-1.822289","name":"CTV News World","category":"Americas"},
      {"url":"https://www.ctvnews.ca/rss/ctvnews-ca-canada-public-rss-1.822289","name":"CTV News Canada","category":"Americas"},
      {"url":"https://www.cnn.com/rss/cnn_topstories.rss","name":"CNN Top Stories","category":"World"},
      {"url":"https://www.npr.org/rss/rss.php?id=1001","name":"NPR US News","category":"Americas"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml","name":"NYT Home","category":"Americas"},
      {"url":"https://feeds.foxnews.com/foxnews/latest","name":"Fox News Latest","category":"Americas"},
      {"url":"https://rss.nytimes.com/services/xml/rss/nyt/US.xml","name":"NYT US News","category":"Americas"},
      {"url":"https://www.usatoday.com/rss/news/","name":"USA Today News","category":"Americas"},
      {"url":"https://feeds.washingtonpost.com/rss/world","name":"Washington Post World","category":"Americas"},
      // New YouTube RSS Feeds
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCupvZG-5ko_eiXAupbDfxWw","name":"CNN Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCEUp6a9V0V1C_vgW2N8jw","name":"BBC News Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UC16niRr50-MSBwiO3YDb3RA","name":"Al Jazeera English Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCknLrEdhRCp1aegoMqRaCZg","name":"Reuters Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCZaT_X_mc0BI-djXOlfhqWQ","name":"The Guardian Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UClgRkhTL3_u7poy9dC0U7w","name":"NBC News Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCaXkIU1QidjPwiAYu6GcHjg","name":"CBS News Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCXIJgqnII2ZOINSWNOGFThA","name":"Fox News Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCqnbDFdCpuN0tUdF0ZldFSA","name":"Sky News Videos","category":"Videos"},
      {"url":"https://www.youtube.com/feeds/videos.xml?channel_id=UCYfdidRxbB8Qhf0Nx7ioOYw","name":"DW News Videos","category":"Videos"}
    ];

    let allItems = [];
    let filteredItems = [];
    let videoItems = [];
    let visibleItems = 20;
    let selectedCategory = "all";
    let searchQuery = "";

    function formatDate(dateString) {
      const date = new Date(dateString);
      if (isNaN(date.getTime())) return "";
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
    }
    function extractImage(content) {
      if (!content) return null;
      const imgRegex = /<img[^>]+src="([^">]+)"/;
      const match = content.match(imgRegex);
      return match ? match[1] : null;
    }
    function extractYouTubeVideoId(url) {
      const regex = /(?:v=|\/embed\/|\/watch\?v=|\/videos\/|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
      const match = url?.match(regex);
      return match ? match[1] : null;
    }
    function truncateText(text, maxLength) {
      if (!text) return "";
      if (text.length <= maxLength) return text;
      return text.substr(0, maxLength) + '...';
    }
    function stripHtml(html) {
      if (!html) return "";
      const tmp = document.createElement('div');
      tmp.innerHTML = html;
      return tmp.textContent || tmp.innerText || '';
    }
    function createSocialButtons(item) {
      const encodedTitle = encodeURIComponent(item.title);
      const encodedUrl = encodeURIComponent(item.link);
      return `
        <div class="social-share">
          <div class="social-button facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}', '_blank')"><i class="fab fa-facebook-f"></i></div>
          <div class="social-button twitter" onclick="window.open('https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}', '_blank')"><i class="fab fa-twitter"></i></div>
          <div class="social-button whatsapp" onclick="window.open('https://wa.me/?text=${encodedTitle}%20${encodedUrl}', '_blank')"><i class="fab fa-whatsapp"></i></div>
          <div class="social-button telegram" onclick="window.open('https://t.me/share/url?url=${encodedUrl}&text=${encodedTitle}', '_blank')"><i class="fab fa-telegram-plane"></i></div>
        </div>
      `;
    }
    function lazyLoadImages() {
      const images = document.querySelectorAll('.lazy-image:not(.loaded)');
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.add('loaded');
            observer.unobserve(img);
          }
        });
      });
      images.forEach(img => imageObserver.observe(img));
    }
    function autoPlayVideos() {
      const videos = document.querySelectorAll('.video-container iframe');
      const videoObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const iframe = entry.target;
          const src = iframe.src;
          if (entry.isIntersecting) {
            if (!src.includes('autoplay=1')) {
              iframe.src = src.includes('?') ? `${src}&autoplay=1&mute=1` : `${src}?autoplay=1&mute=1`;
            }
          } else {
            if (src.includes('autoplay=1')) {
              iframe.src = src.replace('autoplay=1', 'autoplay=0');
            }
          }
        });
      }, { threshold: 0.7 });
      videos.forEach(video => videoObserver.observe(video));
    }
    function renderNewsItems() {
      const container = document.getElementById("rss-feed");
      container.innerHTML = "";
      if (filteredItems.length === 0) {
        container.innerHTML = '<div class="no-results">No news articles found. Try a different search or category.</div>';
        return;
      }
      const itemsToShow = filteredItems.slice(0, visibleItems);
      itemsToShow.forEach((item) => {
        const cleanDescription = stripHtml(item.description || item.content);
        const imageUrl = item.thumbnail ||
                        extractImage(item.content) ||
                        `https://via.placeholder.com/300x180/333333/FF9800?text=${encodeURIComponent(item.title.charAt(0))}`;
        const rssItem = document.createElement("div");
        rssItem.className = "rss-item";
        const fbId = btoa(item.link).replace(/=+$/, "");
        rssItem.innerHTML = `
          <div style="height: 180px;" class="placeholder">
            <img data-src="${imageUrl}" alt="News Image" class="lazy-image" onerror="this.onerror=null; this.src='https://via.placeholder.com/300x180/333333/FF9800?text=${encodeURIComponent(item.title.charAt(0))}';">
          </div>
          <div class="rss-content">
            <div class="source">
              ${item.sourceName}
              <span class="source-tag">${item.category}</span>
            </div>
            <div class="date">${formatDate(item.pubDate)}</div>
            <h3>${item.title}</h3>
            <p>${truncateText(cleanDescription, 150)}</p>
            <a href="${item.link}" target="_blank" class="read-more">Read full story</a>
            ${createSocialButtons(item)}
            <div class="comments-section">
              <div class="fb-comments" data-href="${item.link}" data-width="100%" data-numposts="5" id="fb-comments-${fbId}"></div>
            </div>
          </div>
        `;
        container.appendChild(rssItem);
      });
      if (filteredItems.length > visibleItems) {
        const loadMoreDiv = document.createElement("div");
        loadMoreDiv.className = "load-more";
        loadMoreDiv.innerHTML = `<button id="load-more-button">Load More</button>`;
        container.appendChild(loadMoreDiv);
        document.getElementById("load-more-button").addEventListener("click", () => {
          visibleItems += 20;
          renderNewsItems();
          if (window.FB) window.FB.XFBML.parse();
        });
      }
      lazyLoadImages();
      if (window.FB) window.FB.XFBML.parse();
    }
    function renderStories() {
      const storiesContainer = document.getElementById("stories-container");
      storiesContainer.innerHTML = "";
      const storiesToShow = filteredItems.filter(item => item.category === "Videos").slice(0, 15);
      storiesToShow.forEach((item) => {
        const imageUrl = item.thumbnail ||
                        extractImage(item.content) ||
                        `https://via.placeholder.com/80x120/333333/FF9800?text=${encodeURIComponent(item.title.charAt(0))}`;
        const storyDiv = document.createElement("div");
        storyDiv.className = "story";
        storyDiv.innerHTML = `
          <div style="height: 100%;" class="placeholder">
            <img data-src="${imageUrl}" alt="Story" class="lazy-image" onerror="this.onerror=null; this.src='https://via.placeholder.com/80x120/333333/FF9800?text=${encodeURIComponent(item.title.charAt(0))}';">
          </div>
          <div class="story-title">${truncateText(item.title, 20)}</div>
        `;
        storyDiv.onclick = () => openVideoModal(item);
        storiesContainer.appendChild(storyDiv);
      });
      lazyLoadImages();
    }
    function openVideoModal(item) {
      const modal = document.getElementById("videoModal");
      const videoFeed = document.getElementById("videoFeed");
      videoFeed.innerHTML = "";
      const videoItemsToShow = videoItems.slice(0, 15);
      videoItemsToShow.forEach((video, index) => {
        const videoId = extractYouTubeVideoId(video.link);
        if (videoId) {
          const videoDiv = document.createElement("div");
          videoDiv.className = "video-container";
          videoDiv.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${videoId}?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            <div class="video-title">${truncateText(video.title, 50)}</div>
          `;
          videoFeed.appendChild(videoDiv);
        }
      });
      modal.classList.add("active");
      document.body.style.overflow = "hidden";
      autoPlayVideos();
      // Scroll to the selected video
      const selectedIndex = videoItems.findIndex(v => v.link === item.link);
      if (selectedIndex !== -1) {
        const videoContainers = videoFeed.querySelectorAll(".video-container");
        if (videoContainers[selectedIndex]) {
          videoContainers[selectedIndex].scrollIntoView({ behavior: "smooth" });
        }
      }
    }
    function closeVideoModal() {
      const modal = document.getElementById("videoModal");
      modal.classList.remove("active");
      document.body.style.overflow = "";
      const videoFeed = document.getElementById("videoFeed");
      videoFeed.innerHTML = "";
    }
    function renderCategories() {
      const categoriesContainer = document.getElementById("categories-container");
      categoriesContainer.innerHTML = '<div class="category active" data-category="all">All News</div>';
      const categories = [...new Set(rssSources.map(source => source.category))];
      categories.forEach(category => {
        const categoryDiv = document.createElement("div");
        categoryDiv.className = "category";
        categoryDiv.dataset.category = category;
        categoryDiv.textContent = category;
        categoryDiv.addEventListener("click", () => {
          document.querySelectorAll(".category").forEach(cat => cat.classList.remove("active"));
          categoryDiv.classList.add("active");
          selectedCategory = category;
          filterItems();
        });
        categoriesContainer.appendChild(categoryDiv);
      });
      categoriesContainer.querySelector('.category[data-category="all"]').addEventListener('click', () => {
        document.querySelectorAll(".category").forEach(cat => cat.classList.remove("active"));
        categoriesContainer.querySelector('.category[data-category="all"]').classList.add("active");
        selectedCategory = "all";
        filterItems();
      });
    }
    function filterItems() {
      filteredItems = allItems.filter(item => {
        const categoryMatch = selectedCategory === "all" || item.category === selectedCategory;
        const searchMatch = searchQuery === "" ||
                          item.title?.toLowerCase().includes(searchQuery.toLowerCase()) ||
                          stripHtml(item.description || item.content)?.toLowerCase().includes(searchQuery.toLowerCase());
        return categoryMatch && searchMatch;
      });
      videoItems = allItems.filter(item => item.category === "Videos");
      visibleItems = 20;
      renderNewsItems();
      renderStories();
    }
    async function generateSitemap() {
      const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://dreez-cell.github.io/dreez-cell</loc>
    <lastmod>${new Date().toISOString()}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  ${filteredItems.map(item => `
    <url>
      <loc>${item.link}</loc>
      <lastmod>${new Date(item.pubDate).toISOString()}</lastmod>
      <changefreq>daily</changefreq>
      <priority>0.8</priority>
    </url>
  `).join('')}
</urlset>`;
      console.log("Sitemap generated. Save this to sitemap.xml:", sitemap);
      // To actually save the sitemap, you would need server-side logic or manual file creation
      // For GitHub Pages, create a sitemap.xml file in the repository root with this content
    }
    async function loadWorldNews() {
      const loadingElement = document.getElementById("loading");
      try {
        allItems = [];
        const oneWeekAgo = new Date();
        oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
        const fetchPromises = rssSources.map(async (source) => {
          try {
            const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(source.url)}`);
            const data = await response.json();
            if (data.status === 'ok') {
              data.items.forEach(item => {
                item.sourceName = source.name;
                item.category = source.category;
              });
              return data.items.filter(item => new Date(item.pubDate) >= oneWeekAgo);
            }
            return [];
          } catch (error) {
            console.error(`Failed to fetch from ${source.name}:`, error);
            return [];
          }
        });
        const results = await Promise.all(fetchPromises);
        results.forEach(items => {
          allItems = [...allItems, ...items];
        });
        allItems.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
        if (loadingElement) {
          loadingElement.style.display = 'none';
        }
        filterItems();
        generateSitemap();
      } catch (error) {
        console.error("Failed to fetch news:", error);
        if (loadingElement) {
          loadingElement.style.display = 'none';
        }
        document.getElementById("rss-feed").innerHTML = '<div class="error">Error loading news. Please try again later.</div>';
      }
    }
    function initApp() {
      renderCategories();
      loadWorldNews();
      const searchInput = document.getElementById("search-input");
      const searchButton = document.getElementById("search-button");
      searchButton.addEventListener("click", () => {
        searchQuery = searchInput.value.trim();
        filterItems();
        if (window.FB) window.FB.XFBML.parse();
      });
      searchInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          searchQuery = searchInput.value.trim();
          filterItems();
          if (window.FB) window.FB.XFBML.parse();
        }
      });
      document.getElementById("closeModal").addEventListener("click", closeVideoModal);
      setInterval(loadWorldNews, 300000);
    }
    document.addEventListener("DOMContentLoaded", initApp);
    if ('IntersectionObserver' in window) {
      document.addEventListener("DOMContentLoaded", lazyLoadImages);
      document.addEventListener("scroll", lazyLoadImages);
    } else {
      function loadAllImages() {
        const images = document.querySelectorAll('.lazy-image:not(.loaded)');
        images.forEach(img => {
          img.src = img.dataset.src;
          img.classList.add('loaded');
        });
      }
      window.addEventListener('load', loadAllImages);
      window.addEventListener('scroll', loadAllImages);
    }
    // Swipe Support for Video Modal
    let touchStartY = 0;
    let touchEndY = 0;
    document.getElementById("videoModal").addEventListener("touchstart", e => {
      touchStartY = e.changedTouches[0].screenY;
    });
    document.getElementById("videoModal").addEventListener("touchend", e => {
      touchEndY = e.changedTouches[0].screenY;
      if (touchStartY - touchEndY > 50) {
        // Swipe up
        const modal = document.getElementById("videoFeed");
        const nextVideo = modal.querySelector(".video-container:not(:last-child)");
        if (nextVideo) {
          nextVideo.scrollIntoView({ behavior: "smooth" });
        }
      }
      if (touchEndY - touchStartY > 50) {
        // Swipe down
        const modal = document.getElementById("videoFeed");
        const prevVideo = modal.querySelector(".video-container:not(:first-child)");
        if (prevVideo) {
          prevVideo.scrollIntoView({ behavior: "smooth" });
        }
      }
    });
  </script>
</body>
</html>          
